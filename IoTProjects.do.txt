TITLE: Internet-of-Things Projects
TOC: on

CircuitPython rules! Arduino drools! Let them eat RaspberryPi!

!split
======= Common Mobile Compute Platform =======
__Description:__
A toolbox platform for sensors and communications built around the venerable RPi.

__BOM:__
* "RPi": "https://www.adafruit.com/category/1000" with SD card and power supply. 3b+ is best model while v4 gets debugged.
* Power
  * "Battery": "https://www.adafruit.com/product/3196"
  * "PoE": "https://www.adafruit.com/product/3953"
* Interface
  * "Tiny touchscreen": "https://www.adafruit.com/product/2441"
  * "Minimal OLED": "https://www.adafruit.com/product/3527"
  * "LCD": "https://www.adafruit.com/product/1115"
* RTC: without this logs and data collection is useless
  * "cheap option": "https://www.adafruit.com/product/3386"
  * "good option": "https://www.adafruit.com/product/4282"
* SDR:
  * "cheap option": "https://www.adafruit.com/product/1497"
  * "plan B option": "https://www.adafruit.com/product/3583"
* Wifi:
  * "cheap option": "https://www.adafruit.com/product/1030"
  * "Long-range": "https://www.alfa.com.tw/products_detail/8.htm"
* Location:
  * "GPS": "https://www.adafruit.com/product/2324"
  * "IMU": "https://www.adafruit.com/product/4754"

__Notes:__
* Similar to the "PiTop": "https://www.adafruit.com/product/3762", with a compact housing

!split
======= Domotics =======
__Description:__ Living in a house of the future is either a great idea or a terrible idea...

__User Story:__ So many touch-points of our environment involve mechanical systems in our dwellings, it seems both obvious and inevitable to connect these systems to a computing platform to live a less impactful life.

__Feature Set:__
o Sensors
    o Interior
        o Temperature and humidity of each room
        o nonintrusive appliance load monitor
            o Current sensors
            o Voltage Sensors
            o Circuit design
                o Conceptual description = voltage and current translated to correct range for ADC, goes to ADC, ADC interface with GPIO I2C or SPI bus via isolation
        o Salt level
        o Water pressure and flow
        o Propane level via pressure sensor
        o Air cleaner
        o Smoke / CO / Propane
        o Forced entry (pressure change)
        o Family presence (RFID)
        o Woodstove temp
        o Roomba status
    o Exterior
        o Rain
        o Soil moisture
        o Sunshine
        o Wind
        o Temp
        o Snowfall
        o Humidity
        o Motion detectors
        o Water table depth
o Controls
    o Heat pump
    o Window Fans
    o Lights
    o Power failure
    o Patio snow melter
    o Humidifier / dehumidifier
    o Irrigation
    o Access (electric door strike)
    o Wood Stove blower
        o Stepper motor-controled rheostat
o Server
    o Integrations
        o Thermostat interface with LCD hat
        o NILM data logger
        o Wifi Router and print server
    o https://www.home-assistant.io/

__BOM:__
    * "Common Mobile Compute Platform": "/._ComputerProjects010.html#___sec10"


!split
======= Automotive Media System =======
__Description:__ a simple media system to stream movies and provide Android auto connectivity

__User Story:__ Car audio has become increasingly complex when it doesn't need to be. Android Auto
can provide a great in-car experience, but all the 3rd-party AA receivers are expensive.

__Feature Set:__
o Android Auto
o Media network share
o SDR for radio (and everything else RF):
    o FM radio with station/song info
    o Weather Band/Fax
    o Police scanner
    o SSB
o ODBII integration:
    o Logging
    o Alternate dashboard displays
o UI/Controls:
    o Macro and micro tuner wheels: for quickly moving through either the spectrum or file list selection sets
    o Touchscreen for configurable selection controls
o External:
    o Engine start?
    o GPS tracking

__Phasing:__
o Build RPi software stack
o Integrate touch screen, push buttons, and dials
o Integrate peripheral hardware: SDR, HD, microphone
o Integrate 6-channel amplifier and stereo hat
o Build housing
o Build wiring harness
o Install

__BOM:__
* "Common Mobile Compute Platform": "/._ComputerProjects010.html#___sec10"
* https://www.adafruit.com/product/1752

__Notes:__
* https://www.zdnet.com/article/raspberry-pi-goes-android-auto-now-you-can-build-your-own-cheap-car-head-unit/
* http://i-carus.com/
* https://learn.adafruit.com/freq-show-raspberry-pi-rtl-sdr-scanner/overview
* https://othernet.is/
* https://magpi.raspberrypi.org/articles/android-auto-openauto

!split
======= GPS Chartplotter =======
__Description:__
A mobile mapping solution for use in car, boat, or bike

__User Story:__
A digital map has more to offer than hard-copy, but also, this is just my wheelhouse. BGM seems to have 
largely captured the marine market, and android auto/apple car play for the automotive market, but these are 
still proprietary and limited in scope. I want selective sensor integration from a variety of environments and
COTS hardware.

__Feature Set:__
o Touchscreen
o Ruggedized:
  o Pot into silicone
  o Shock abosrbing case
  o Mineral oil bath
o Multi-domain navigational integration:
  o aGPS w/ WAAS
  o inertial
  o LORAN/beacon
o Sensors:
  o sidescan sonar
  o depth finder
  o radar

# __Phasing:__
# *

__BOM:__
* "Common Mobile Compute Platform": "/._ComputerProjects010.html#___sec10"

# __Notes:__
# *


!split
======= Common Sensor and Datalogger Platform =======
__Description:__
Portable and wireless environmental IoT sensor and datalogger

__User Story:__
We want to be able measure a variety of environmental conditions, without hooking up wiring. We can place a sensor indoors or outdoors just for
spot checks or leave it for several weeks or add a solar power pack for permanent power. We can hook it up to a dashboard to monitor and
provide alarms, or use it in more remote conditions and have it upload once wifi is available, or use a cell modem. Some possible applications include:
* Dive computer
* Bike computer
* Drone computer
* Weather Balloon computer
* Environmental Datalogger
* Marine Chartplotter
* Indoor air quality
* Energy Monitor
* Domotics, solar, or hydroponics controller

__Feature Set:__
* Internet connection discovery and automatic frequent communication
* Plenty of digital and analog inputs
* LCD Screen and a few buttons for basic status and config
* 2-week battery life
* Watertight potting and enclosure (100m)
* Shock-proof (shotgun at 10m)
* ports for display, antenna, power, and USB
* Wifi as base networking capability, with CDMA, Ham (APRS transmitter) and LoRa communications as options

__Phasing:__
* Base unit build-out and config
* develop ports
* ruggedize

__BOM:__
* Base Unit: "Adafruit Feather0": "https://www.adafruit.com/product/5303"
* Base Unit: "Lithium Ion Battery Pack - 3.7V 6600mAh": "https://www.adafruit.com/product/353"
* Base Unit: "Adafruit FeatherWing OLED - 128x32 OLED Add-on For Feather": "https://www.adafruit.com/product/2900"
* "Air Quality and Gas Sensor": "https://www.adafruit.com/product/3709"
* "Water turbidity and temp": "https://www.digikey.com/products/en?keywords=165D6042P003"
* "Water pressure": "https://www.digikey.com/products/en?keywords=480-6244-ND"
* "Non-intrusive current sensors": "https://tinyurl.com/y4jmsg6z"

__Notes:__
* "Adafruit.io": "https://io.adafruit.com/" for dashboard and short-term data warehousing
* https://learn.adafruit.com/make-it-data-log-spreadsheet-circuit-playground
* https://thecavepearlproject.org/
* https://learn.adafruit.com/remote-iot-environmental-sensor/overview
* "WipperSnapper": "https://learn.adafruit.com/quickstart-adafruit-io-wippersnapper" greatly simplifies everything!


!split
======= Micro Hydroponics =======
__Description:__ Small air pump-based flood irrigation system for office plants

__User Story:__ Offices are great places for plants, with ample windows and beneficial effects for workers. But, regular watering can be an issue.

__Feature Set:__
o Flood-based system of irrigation with emergency overflow
    o Air pump inflates bladder, raises solution level, opens ARV to deflate and drop level
    o 16" max head = 0.6 PSI
o Planting cells to allow co-planting but easy replacement/management
    o Pre-made rock wool blocks available locally
o 14 day hands-off and quiet operation
    o Water uptake/usage increases air volume needed to achieve same fluid level, requiring level sensors
o Water level and quality sensors, media moisture for SmartUtility demonstration via dashboard
    o Water and energy usage, solution level and nutrient strength
    o Back-calculate media moisture based on the timing of flooding and the drain-back volume?
o Low voltage and redundant level sensor
    o Pressure sensor for full range and eTape for top 12"
o Attractive as office decor

__Phasing:__
o Build sensor and ARV mechanicals
    o Mount tape and air feed and pressure feed to stick, with ARV and pressure sensor at top
    o Assemble and encase feather near power supply
o Install base controller logic
o Build server script that runs flood routine based on MQTT events
o Build flood tank with rock wool planting cells
o triple-tote system:
    o Media tray
        o Notches in bottom edge for drainage
        o Anchoring for rock wool cubes
            o brass screws along rim, to strech rubber bands over?
    o Solution tank
        o Air line running into 1 large ballon
          o multiple balloons make multiple points of failure, plus don't inflate equally
        o Latch media tray in place to avoid flotation
        o Thru-hole for overflow port
    o Overflow tank
        o Captures leaks or overflows
        o Removal with handle for general purpose use
o Open-top cabinet on casters to hold everything and make pretty

__BOM:__
* "Adafruit ESP32 Feather": "http://adafru.it/3619"
* "12in Chemical eTape Liquid Level Sensor": "https://www.adafruit.com/product/464"
* "Mini solenoid air valve": "https://www.adafruit.com/product/4663"
* "Controllable Four Outlet Power Relay Module version 2": "https://www.adafruit.com/product/2935"
* Separate 5v 1.5A power supply for solenoid and connectors to 
* "growing media": "https://www.sunsethydro.com/collections/growing-media/products/grodan-delta-hugo-6in-block-6in-x-6in-x-6in-w-hole-individual-single-blocks"
* "totes": "https://www.truevalue.com/latch-carry-tote-clear-base-18-gallons"
* "MPVZ5004GW PRESSURE SENSOR by NXP": "https://www.digikey.com/product-detail/en/nxp-usa-inc/MPVZ5004GW7U/MPVZ5004GW7U-ND/1168374"
* Silicone tubing

__Notes:__
* https://learn.adafruit.com/home-automation-in-the-cloud-with-the-esp8266-and-adafruit-io/introduction
* Needs some type of anchoring for media in top container for replacing plants and rock wool easily
* Flood chamber must be securely anchored against flotation
* "First iteration": "./PlantWaterer/PlantWaterer.html" of the design was a simple Trinket-based timer that controlled a "mini peristaltic pump": "https://www.adafruit.com/product/1150". It worked if the water source was elevated to deal with the limits of the pump curve.


__Logic:__
o Server scheduling:
    o Repeat Daily:
        o Fire client event
        o If no completion signal in 60 minutes, report
o Client event:
    o turn on air pump and close air release valve for until level has stabilized to within 0.25" for 5 minutes
        o Report time to complete
        o Repeat every 15 seconds: 
            o report solution level from both sensors
            o if it has been more than 20 minutes, terminate on cycle and alert
    o if sensors do not agree on level, alert
    o if solution level falls below 3", alert


__CODE:__
@@@CODE ./code/microHydroponics/microHydroponics.ino envir=cpro



!split
======= Technology as Art =======
===== Wood Burning Plotter =====
__Description:__
A polar coordinate-based dual axis large-format plotter that uses solar power to maneuver a magnifying
lens over a wooden canvas vertically to burn an image.

__User Story:__
Plotters are simple output devices, but can require a large amount of track and
infrastructure; using 2 motors to control location of marker via line in/out in a polar coordinate
fashion will allow the device to scale up to billboard size for a giant art display, say along a
major north/south interstate highway. For example.

__Feature Set:__
o Weatherproof and hidden controller, motor, and spindle housing
o Solar-powered
o Spool capacity of 50' of 30# braided fishing line
o Spooling speed control from 1mm/min - 25mm/min
o Optical sensor for darkness of burn
o Removable controller, for image and software update
o Calibration process
o Fire suppression

__Notes:__
o https://www.raspberrypi.org/blog/we-love-a-good-pen-plotter/

__Phasing:__

__BOM:__

===== Lightning Catcher =====
__Description:__ Rocket-based micro-wire launch system to direct a lightning strike to a specific location


__User Story:__ Lightning is one of the most powerful forces of nature, and I want to catch it. Plus, it could be a great learning opportunity.


__Feature Set:__
o Fully enclosed silo system
o Internet or phone activated
o Hi-speed photography?
o 2000m altitude


__Phasing:__
* Research where/how this has been done before
* Find a wide-open enough area that someone will allow this to happen in
* Build launch system in test silo
* Test launch
* Install silo
* Track weather


!split
======= Irrigation Remote =======
__Description:__ Simple SCADA to drive drip irrigation.


__User Story:__ We leave the house for extended periods during hot dry weather and know that we won't lose plants. When we harvest, we can turn off drippers by plant. Plumbing and electrical are unobtrusive and dependable. Water is conserved as much as possible. We can use rain water if desired.


__Feature Set:__
o Main line valves actuated by internet-connected IoT switch, on schedule with manual overrides.
o Flow meter used to activate alarm of valve failure and fine-tune water usage.
o Rain, soil moisture, and localized temperature sensor pack to fine-tune water usage. Battery-powered and internet-connected for minimal wiring.
o Gang valving and individual drippers in garden for easy access and fine control.
o Main line plumbing hidden and removable for storage, freeze protection, repair, and protection.
o SImple set up and, logging, and dashobarding via "WipperSnapper": "https://learn.adafruit.com/quickstart-adafruit-io-wippersnapper"


__Phasing:__
* indoor plumbing to hose cock (done)
* cistern with submersible pump (done)
* IoT switch, meter, and main line valve (done)
* buried main line and gang valving
* Soil moisture and flow sensors

__Iterations:__
o Housed in outdoor electrical box, but leaked and destroyed board with moisture. 
    o Use 3D printed enclosure that includes an oring?
    o Forgo the combined electronics and just use a simple wifi-controlled outlet relay to drive the valve power supply?

__BOM:__
o "https://www.adafruit.com/wishlists?wid=554909"

FIGURE: [HappyHippieLifestyle/plumbing, width=900 frac=0.9] Plumbing Schematic. label{fig:plumbing}

!split
======= The Best Damn Radio System =======

__Description:__ Tiny HAM radio that can be used anywhere

__User Story:__ The world is still a big place and to explore certain parts in safety, we need a way to broadcast an emergency.
PLBS are really only domestic, not hackable (or even able to replace batteries), and for emergency only. Sat messengers have
not-insignificant subscription fees, and varying coverage. HAM remains the most ubiquitous global radio infrastructure, and with
help, can be transmitted from any global location, for a variety of needs.

__Feature Set:__
o Handheld SDR
o Uses APRS+GPS for tracking mode
o Can be modded to suit the locale and needs of a trip
o Can be used for personal emergency messaging, way-point tacking, sharing progress
o Ruggedize by potting in epoxy with heat sinks?
o Cheap and small enough to carry spares
o Yagi antenna to use as a directional beacon?

__Notes:__
* Reference devices:
    * "Tiny tracker": "https://www.byonics.com/tinytrak4"
    * "Inreach Explorer": "https://www.garmin.com/en-US/p/561269"
    * "PortableSDR on Hackaday": "https://hackaday.io/project/1538-portablesdr"
    * "Great Scott base unit": "https://www.adafruit.com/product/3583?gclid=CjwKCAiAsNKQBhAPEiwAB-I5zUZdGPTO1cpWq1uvHynsPHWheqFeQ6TxZsp3_P-s2Zo4jjYT4xDFMhoCwPQQAvD_BwE"


# !split
# ======= Template =======

# __Description:__
# __User Story:__
# __Feature Set:__
# o

# __Phasing:__
# *

# __BOM:__
# o

# __Notes:__
# *

# __Logic:__

# __Code:__
# @@@CODE ./filepath envir=Xpro

# FIGURE: [path, width=900 frac=0.9] Something. label{fig:tag1}
